<h1><a href="https://github.com/mrworf/photoframe">PhotoFrame Configuration</a></h1>
<img alt="On screen now" title="Realtime view, updates every 30s" src="/details/current" id="screen">
<div>
	<div>
		Options
	</div>
	<div>
		{{#if resolution.resolution}}
		Resolution
		<select name="tvservice">
			{{#select settings.tvservice}}
			{{#each resolution.resolution}}
				<option value="{{this.mode}} {{this.code}} HDMI">{{this.width}}x{{this.height}}{{this.scan}} ({{this.rate}}Hz)</option>
			{{/each}}
			{{/select}}
		</select>
		{{else}}
			No display connected or detected
		{{/if}}
		<br>
		Select custom display driver
		<select name="display-driver">
			{{#select settings.display-driver}}
			<option value="none">Use HDMI only</option>
			{{#each drivers}}
				<option value="{{this}}">{{this}}</option>
			{{/each}}
			{{/select}}
		</select>
		<input style="position:absolute; top: -100px" type="file" data-url="upload/driver" id="driver" name="filename"><button id="driver-button">Upload new driver</button>
		<br>
		Time zone
		<select name="timezone">
			{{#select settings.timezone}}
			{{#each timezones}}
				<option value="{{this}}">{{this}}</option>
			{{/each}}
			{{/select}}
		</select>
		<br>
		GPIO PIN to monitor for shutdown interrupts
		<input value="{{settings.shutdown-pin}}" type="text" class="small" name="shutdown-pin" data-validate="gpio" data-confirm="gpio">
		<br>
		Turn on display at hour <input value="{{settings.display-on}}" type="text" class="small aright" name="display-on" data-validate="time">
		and off at hour <input value="{{settings.display-off}}" type="text" class="small aright" name="display-off" data-validate="time"> (24h time)
		<br>
		Change every <input value="{{settings.interval}}" type="text" class="small" name="interval" data-validate="interval"> seconds<br>
		<br>
		{{#if settings.sensor}}
		Auto off if ambient lux is below
		<input value="{{settings.autooff-lux}}" type="text" class="medium" name="autooff-lux" data-validate="lux"> lux for
		<input value="{{settings.autooff-time}}" type="text" class="small" name="autooff-time" data-validate="minutes"> minutes
		<br>
		Current ambient environment <span id="lux">-.--</span> lux and <span id="colortemp">----</span>K color temperature.
		<br>
		{{/if}}
		Power saving measures should
		<select name="powersave">
			{{#select settings.powersave}}
			<option value="none">not be used</option>
			<option value="schedule">use schedule</option>
			<option value="sensor">use environment {{#if settings.sensor}}{{else}}(no sensor){{/if}}</option>
			<option value="sensor+schedule">use schedule and environment {{#if settings.sensor}}{{else}}(no sensor){{/if}}</option>
			{{/select}}
		</select>
	</div>
</div>
<br>
<div>
	<div>
		System
	</div>
	<div>
		<input type="button" id="update" value="Force Update">
		<div style="display: inline-block; width: 100px"></div>
		<input type="button" id="reboot" value="Reboot">
		<input type="button" id="shutdown" value="Power off">
		<div style="display: inline-block; width: 100px"></div>
		<input type="button" id="reset" value="Factory Reset">
	</div>
</div>
<br>
<div>
	{{#each service-defined}}
	<div>
		{{name}}<br>
		{{#ifvalue state value="OAUTH" }}
			<input style="position:absolute; top: -100px" type="file" data-url="service/{{id}}/oauth" data-service="{{id}}" class="oauth-json" name="filename">
			<input type="button" data-service="{{id}}" class="service-oauth" value="Authorize">
		{{/ifvalue}}
		<input type="button" data-service="{{id}}" class="service-delete" value="Delete">
	</div>
	<div>
		{{#if keywords.keywords}}
		<p class="nospace" id="keywords">
			{{#each keywords.keywords}}
				<input class="delete" type="button" data-service="{{../id}}" data-index="{{@index}}" value="Delete">
				<input class="search" data-key="{{encode this}}" type="button" value="Open">
				{{#if this}}
					{{this}}
				{{else}}
					&lt;empty - picks one of the last photos added&gt;
				{{/if}}
				<br>
			{{/each}}
		</p>
		{{/if}}
		<p class="nospace" style="display: flex">
			<input type="text" id="keyword" style="flex: 2; text-align: left">
			<input type="button" id="add" data-service="{{id}}" value="Add keywords">
		</p>
	</div>
	{{/each}}
</div>
	<br>
<div>
	<input type="button" id="new-service" value="Add photo provider">
	<select id="new-service-type">
		{{#each service-available}}
			<option value="{{this.id}}">{{this.name}}</option>
		{{/each}}
		</select>
	</div>
<br>

<script type="text/javascript" src="/js/main.js"></script>
